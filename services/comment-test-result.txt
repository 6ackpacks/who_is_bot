

[1m[36m╔════════════════════════════════════════════════════════════════════════╗[0m
[1m[36m║                     评论系统并发测试                                     ║[0m
[1m[36m║                  Comment System Concurrent Testing                     ║[0m
[1m[36m╚════════════════════════════════════════════════════════════════════════╝[0m



================================================================================
[1m[36m设置测试环境[0m
================================================================================

[34mℹ 生成测试用户和认证token...[0m
[32m✓ 生成了 20 个测试用户[0m
[33m⚠ 注意: 本测试需要真实的JWT token才能执行需要认证的操作[0m

================================================================================
[1m[36m测试场景 1: 并发创建评论[0m
================================================================================

[34mℹ 20 个用户同时发表评论...[0m
[34mℹ 总耗时: 39ms[0m
[34mℹ 平均响应时间: 1.95ms[0m
[33m⚠ 未授权: 20 个请求 (需要JWT token)[0m

================================================================================
[1m[36m测试场景 2: 并发获取评论列表[0m
================================================================================

[34mℹ 20 个用户同时获取评论列表...[0m
[34mℹ 总耗时: 46ms[0m
[34mℹ 平均响应时间: 2.30ms[0m
[32m✓ 成功: 0 个请求[0m
[31m✗ 失败: 20 个请求[0m

================================================================================
[1m[36m测试场景 3: 并发删除评论[0m
================================================================================

[33m⚠ 没有可删除的评论，跳过此测试[0m

================================================================================
[1m[36m测试场景 4: 并发点赞评论 (竞态条件测试)[0m
================================================================================

[33m⚠ 没有可用的评论ID，跳过此测试[0m

================================================================================
[1m[36m测试报告[0m
================================================================================

┌─────────────────────────────────────────────────────────────────────────┐
│                         评论系统并发测试报告                              │
└─────────────────────────────────────────────────────────────────────────┘

测试配置:
  - 并发用户数: 20
  - 删除用户数: 10
  - 测试内容ID: 550e8400-e29b-41d4-a716-446655440000
  - 服务器地址: http://localhost:80

场景 1: 并发创建评论
  ✓ 成功: 0/20
  ✗ 失败: 20/20
  ⚠ 未授权: 20/20
  ⏱ 总耗时: 39ms
  ⏱ 平均响应: 1.95ms
[33m⚠   状态: 需要认证 (预期行为)[0m

场景 2: 并发获取评论列表
  ✓ 成功: 0/20
  ✗ 失败: 20/20
  ⏱ 总耗时: 46ms
  ⏱ 平均响应: 2.30ms
[31m✗   状态: 失败[0m

场景 3: 并发删除评论
[33m⚠   状态: 跳过 (没有可删除的评论)[0m

场景 4: 并发点赞评论 (竞态条件测试)
[33m⚠   状态: 跳过 (没有可用的评论)[0m

─────────────────────────────────────────────────────────────────────────
总结:
[33m⚠ 部分测试未通过或需要认证。请查看详细报告。[0m

关键发现:
[34mℹ • 创建评论需要JWT认证 (符合安全要求)[0m

─────────────────────────────────────────────────────────────────────────
[34mℹ 
测试完成！[0m
