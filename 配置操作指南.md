# 📱 微信小程序配置指导 - 一步步操作手册

**项目**: 谁是人机？
**目标**: 配置 TabBar 图标并运行小程序查看效果
**预计时间**: 10-15 分钟

---

## 🎯 第一步：准备 TabBar 图标

### 方案 A：快速临时方案（推荐，5分钟）

使用纯色方块作为临时图标，快速看到效果。

#### 操作步骤：

1. **下载临时图标包**

   访问以下任一网站下载简单图标：

   - **Iconfont（阿里巴巴图标库）**: https://www.iconfont.cn/
     - 搜索关键词：home, chart, upload, community, user
     - 下载 PNG 格式，尺寸选择 81x81px

   - **IconPark（字节跳动图标库）**: https://iconpark.oceanengine.com/
     - 搜索对应图标
     - 下载时选择 PNG，尺寸 81x81

   - **Flaticon**: https://www.flaticon.com/
     - 搜索 "home icon", "leaderboard icon" 等
     - 免费下载 PNG 格式

2. **需要的图标清单**

   | 序号 | 文件名 | 用途 | 建议图标 |
   |------|--------|------|---------|
   | 1 | `tab-home.png` | 首页-普通状态 | 房子图标（灰色） |
   | 2 | `tab-home-active.png` | 首页-选中状态 | 房子图标（黑色） |
   | 3 | `tab-leaderboard.png` | 榜单-普通状态 | 奖杯/排行榜图标（灰色） |
   | 4 | `tab-leaderboard-active.png` | 榜单-选中状态 | 奖杯/排行榜图标（黑色） |
   | 5 | `tab-publish.png` | 发布-普通状态 | 加号/上传图标（灰色） |
   | 6 | `tab-publish-active.png` | 发布-选中状态 | 加号/上传图标（黑色） |
   | 7 | `tab-square.png` | 广场-普通状态 | 聊天/社区图标（灰色） |
   | 8 | `tab-square-active.png` | 广场-选中状态 | 聊天/社区图标（黑色） |
   | 9 | `tab-profile.png` | 我的-普通状态 | 用户图标（灰色） |
   | 10 | `tab-profile-active.png` | 我的-选中状态 | 用户图标（黑色） |

3. **放置图标文件**

   将下载的 10 个图标文件放入项目的 `images` 文件夹：

   ```
   C:\Users\li\Downloads\who-is-the-bot\images\
   ```

   确保文件名完全匹配上表中的文件名！

---

### 方案 B：使用 AI 生成图标（3分钟）

如果你有 AI 工具访问权限：

1. **使用 ChatGPT/Claude/其他 AI**

   提示词示例：
   ```
   请帮我生成 5 组微信小程序 TabBar 图标，每组包含普通状态（灰色 #999999）和选中状态（黑色 #000000）：
   1. 首页 - 房子图标
   2. 榜单 - 奖杯图标
   3. 发布 - 加号图标
   4. 广场 - 聊天气泡图标
   5. 我的 - 用户头像图标

   要求：PNG 格式，81x81px，简约线条风格
   ```

2. **下载并重命名**

   将生成的图标按照上面的文件名清单重命名，放入 `images` 文件夹。

---

### 方案 C：超快速占位方案（1分钟）

如果你只是想快速看效果，可以暂时使用任意 81x81px 的图片：

1. **创建简单的纯色方块**

   - 打开 Windows 画图工具
   - 创建 81x81 像素的画布
   - 填充灰色（普通状态）或黑色（选中状态）
   - 保存为对应的文件名

2. **或者使用占位图服务**

   访问：https://via.placeholder.com/81x81/999999/FFFFFF?text=Home

   - 右键保存图片
   - 修改 URL 中的 text 参数生成不同图标
   - 重命名并放入 `images` 文件夹

---

## 🔧 第二步：清除缓存并重新编译

### 操作步骤：

1. **打开微信开发者工具**

   如果还没有安装，请先下载：
   https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html

2. **导入项目**（如果还没导入）

   - 点击 "导入项目"
   - 选择项目目录：`C:\Users\li\Downloads\who-is-the-bot`
   - AppID：`wx75af0c6413e1d9e5`
   - 项目名称：谁是人机？

3. **清除缓存**

   在微信开发者工具中：

   ```
   菜单栏 → 工具 → 清除缓存 → 清除全部缓存
   ```

   或者分别清除：
   - ✅ 清除文件缓存
   - ✅ 清除编译缓存
   - ✅ 清除登录缓存（可选）

4. **重新编译**

   - 点击工具栏的 "编译" 按钮
   - 或使用快捷键：`Ctrl + B` (Windows) / `Cmd + B` (Mac)

5. **等待编译完成**

   观察控制台输出，确保没有红色错误信息。

---

## ✅ 第三步：验证效果

### 检查清单：

1. **控制台检查**

   - [ ] 没有红色错误信息
   - [ ] 没有 "module not defined" 错误
   - [ ] 没有 "Page has not been registered yet" 警告
   - [ ] 看到 "小程序启动" 的日志

2. **TabBar 检查**

   - [ ] 底部显示 5 个 Tab：首页、榜单、发布、广场、我的
   - [ ] 每个 Tab 都有图标显示
   - [ ] 点击不同 Tab 时，图标会变色（灰色 ↔ 黑色）
   - [ ] 当前选中的 Tab 图标是黑色，文字也是黑色

3. **页面功能检查**

   - [ ] **首页**：能看到内容卡片，显示文字或图片
   - [ ] **榜单**：能看到 AI 模型排行榜
   - [ ] **发布**：显示占位内容（功能未实现）
   - [ ] **广场**：显示占位内容（功能未实现）
   - [ ] **我的**：能看到用户信息和统计数据

---

## 🎬 第四步：查看视频效果（如果需要）

### 当前项目状态：

⚠️ **注意**：当前项目中的内容类型包括：
- ✅ **文本内容**：可以正常显示
- ✅ **图片内容**：使用占位图服务（picsum.photos）
- ❌ **视频内容**：暂未实现

### 如果想看视频效果：

#### 选项 1：添加视频数据到 mockData.js

1. **编辑 `utils/mockData.js`**

   在 `MOCK_FEED` 数组中添加视频类型的数据：

   ```javascript
   {
     id: '5',
     type: 'video',
     url: 'https://你的视频URL.mp4',
     title: '视频标题',
     isAi: true,
     modelTag: 'Sora',
     authorId: 'ai_03',
     provider: 'OpenAI',
     deceptionRate: 85,
     explanation: "这是 AI 生成的视频...",
     comments: []
   }
   ```

2. **修改 feed.wxml 支持视频**

   需要添加 `<video>` 组件来播放视频。

#### 选项 2：使用现有的图片内容测试

当前项目已经配置了图片显示功能，可以先测试图片效果：

1. 打开首页
2. 滑动查看不同的内容卡片
3. 点击 "是 AI" 或 "是真人" 按钮进行判定
4. 查看判定结果和统计数据更新

---

## 🐛 常见问题排查

### 问题 1：图标不显示

**可能原因**：
- 图标文件名不匹配
- 图标文件不在 `images` 文件夹中
- 图标尺寸不是 81x81px
- 图标格式不是 PNG

**解决方案**：
1. 检查 `images` 文件夹中是否有所有 10 个图标文件
2. 确认文件名完全匹配（区分大小写）
3. 确认图标是 PNG 格式，尺寸是 81x81px
4. 重新编译项目

---

### 问题 2：控制台仍有错误

**可能原因**：
- 缓存未清除干净
- 代码修改未保存
- 微信开发者工具版本过旧

**解决方案**：
1. 完全关闭微信开发者工具
2. 重新打开并导入项目
3. 再次清除缓存
4. 重新编译

---

### 问题 3：页面显示空白

**可能原因**：
- 模块加载失败
- 数据获取失败

**解决方案**：
1. 打开控制台查看具体错误信息
2. 确认 `utils/mockData.js` 文件已修复
3. 检查页面的 `.js` 文件是否正确 require 了 mockData

---

### 问题 4：图片加载失败

**可能原因**：
- 网络域名未配置
- 网络连接问题

**解决方案**：
1. 在微信开发者工具中：
   ```
   设置 → 项目设置 → 本地设置
   ```
2. 勾选：
   ```
   ☑ 不校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书
   ```
3. 重新编译

---

## 📸 预期效果截图说明

### 首页（Feed）
- 顶部导航栏：显示 "谁是人机?"
- 内容区域：显示内容卡片（文字或图片）
- 底部按钮：两个大按钮 "是 AI" 和 "是真人"
- TabBar：5 个图标，"首页" 图标为黑色（选中状态）

### 榜单（Leaderboard）
- 顶部：类型筛选按钮（全部、图像、文本、视频）
- 列表：显示 AI 模型排名
- 每项显示：模型名称、公司、欺骗率、测试次数
- TabBar："榜单" 图标为黑色（选中状态）

### 我的（Profile）
- 顶部：用户头像和昵称
- 统计数据：准确率、已判定数量、连胜记录
- 成就列表：显示成就进度
- TabBar："我的" 图标为黑色（选中状态）

---

## 🎉 完成后的下一步

### 立即可以做的：

1. **测试所有功能**
   - 在首页进行内容判定
   - 查看榜单排名
   - 查看个人统计数据

2. **自定义内容**
   - 编辑 `utils/mockData.js` 添加更多测试数据
   - 修改样式和颜色

3. **添加真实功能**
   - 实现发布页面
   - 实现广场页面
   - 连接真实后端 API

### 需要配置的（非紧急）：

1. **API 密钥**
   - 编辑 `.env.local`
   - 替换 `GEMINI_API_KEY=PLACEHOLDER_API_KEY`

2. **服务器域名**
   - 在微信公众平台配置
   - 添加 `picsum.photos` 和 `api.dicebear.com`

3. **更好的图标**
   - 设计专业的品牌图标
   - 统一视觉风格

---

## 📞 需要帮助？

如果遇到问题：

1. **查看控制台**
   - 截图完整的错误信息
   - 注意红色错误和黄色警告

2. **检查文件**
   - 确认所有修改都已保存
   - 确认文件路径正确

3. **重启大法**
   - 关闭微信开发者工具
   - 重新打开项目
   - 清除缓存并重新编译

---

## ✅ 快速检查清单

在开始之前，确保：

- [ ] 已修复 `utils/mockData.js` 的语法错误
- [ ] 已修复 `services/mockData.ts` 的语法错误
- [ ] 已修改 `app.json`，将"判定"改为"首页"
- [ ] 已在 `app.json` 中添加图标路径配置
- [ ] 已准备好 10 个 TabBar 图标文件
- [ ] 已将图标文件放入 `images` 文件夹
- [ ] 已安装微信开发者工具
- [ ] 已清除缓存
- [ ] 已重新编译项目

---

**祝你配置顺利！🎊**

如果一切正常，你应该能看到一个完整的微信小程序，带有漂亮的 TabBar 图标和可交互的内容！
