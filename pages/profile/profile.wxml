<!--pages/profile/profile.wxml-->
<view class="profile-container theme-{{currentTheme}}">
  <scroll-view scroll-y class="profile-scroll">

    <!-- 个人信息头部 -->
    <view class="profile-header">
      <!-- 头像（带渐变边框） -->
      <view class="avatar-wrapper">
        <view class="avatar-gradient">
          <image src="{{userInfo.avatar}}" class="avatar-image" mode="aspectFill"></image>
        </view>
      </view>

      <!-- 用户名 -->
      <view class="username">{{userInfo.nickname}}</view>

      <!-- 等级徽章 -->
      <view class="level-badge-row">
        <view class="level-dot"></view>
        <text class="level-text">{{userInfo.levelName}}</text>
      </view>

      <!-- 进度条 -->
      <view class="progress-section">
        <view class="progress-labels">
          <text class="progress-label-left">Lv.{{userInfo.level}}</text>
          <text class="progress-label-right">下一级：{{userInfo.nextLevel}}</text>
        </view>
        <view class="progress-bar">
          <view class="progress-fill" style="width: {{userInfo.progress}}%"></view>
        </view>
        <text class="progress-hint">还需识破 {{userInfo.remaining}} 个 AI 伪装即可升级</text>
      </view>

      <!-- 统计数据 -->
      <view class="stats-row">
        <view class="stat-item">
          <text class="stat-value">{{stats.totalJudged}}</text>
          <text class="stat-label">总判定</text>
        </view>
        <view class="stat-item stat-divider">
          <text class="stat-value stat-highlight">{{stats.accuracy}}%</text>
          <text class="stat-label">准确率</text>
        </view>
        <view class="stat-item">
          <text class="stat-value stat-streak">{{stats.streak}}</text>
          <text class="stat-label">最佳连胜</text>
        </view>
      </view>
    </view>

    <!-- 创作者中心 -->
    <view class="creator-section">
      <view class="section-header">
        <text class="section-title">创作者中心</text>
        <view class="beta-badge">Beta</view>
      </view>

      <view class="creator-card">
        <view class="creator-content">
          <view class="lock-icon-wrapper">
            <text class="icon icon-lock icon-xl"></text>
          </view>
          <text class="creator-title">上传通道未开启</text>
          <text class="creator-desc">想让大家看看你的高仿人机？</text>
          <text class="creator-desc">达到 <text class="highlight-text">硅谷天才</text> 等级后解锁上传权限</text>
          <button class="creator-btn" disabled>申请内测资格</button>
        </view>
        <view class="creator-bg-circle"></view>
      </view>
    </view>

    <!-- 判定历史入口 -->
    <view wx:if="{{isLoggedIn}}" class="history-section">
      <view class="section-title">最近判定</view>

      <view class="history-entry-card" bindtap="goToHistory">
        <view class="entry-icon">
          <text class="icon icon-chart icon-white"></text>
        </view>
        <view class="entry-content">
          <text class="entry-title">查看判定历史</text>
          <text class="entry-desc">查看你的所有判定记录和详情</text>
        </view>
        <view class="entry-arrow">
          <text class="icon icon-right"></text>
        </view>
      </view>
    </view>

    <!-- 我的成就 -->
    <view class="achievements-section">
      <view class="section-title">我的成就</view>

      <!-- 已获得成就 -->
      <view class="achievement-item achievement-unlocked">
        <view class="achievement-icon icon-unlocked">
          <text class="icon icon-eye icon-white icon-lg"></text>
        </view>
        <view class="achievement-info">
          <view class="achievement-name">火眼金睛</view>
          <view class="achievement-desc">连续准确率达到 90%</view>
        </view>
        <text class="achievement-status status-unlocked">已获得</text>
      </view>

      <!-- 锁定成就 -->
      <view class="achievement-item achievement-locked">
        <view class="achievement-icon icon-locked">
          <text class="icon icon-thunder icon-lg"></text>
        </view>
        <view class="achievement-info">
          <view class="achievement-name">闪电判官</view>
          <view class="achievement-desc">1分钟内完成10次正确判定</view>
        </view>
        <text class="achievement-status status-locked">
          <text class="icon icon-lock icon-sm"></text>
        </text>
      </view>

      <!-- 主题切换按钮 -->
      <view class="theme-toggle-section">
        <view class="section-subtitle">外观设置</view>
        <view class="theme-toggle-card" bindtap="handleThemeToggle">
          <view class="theme-toggle-content">
            <view class="theme-icon">
              <text class="icon {{currentTheme === 'dark' ? 'icon-moon' : 'icon-sun'}} icon-white icon-lg"></text>
            </view>
            <view class="theme-info">
              <text class="theme-title">{{currentTheme === 'dark' ? '暗色模式' : '亮色模式'}}</text>
              <text class="theme-desc">点击切换到{{currentTheme === 'dark' ? '亮色' : '暗色'}}主题</text>
            </view>
          </view>
          <view class="theme-arrow">
            <text class="icon icon-right"></text>
          </view>
        </view>
      </view>

      <!-- 分享按钮 -->
      <button class="share-btn" bindtap="handleShare">
        <text class="icon icon-link icon-white"></text>
        <text class="share-text">分享我的侦探名片</text>
      </button>

      <!-- 退出登录按钮 -->
      <button wx:if="{{isLoggedIn}}" class="logout-btn" bindtap="handleLogout">
        <text class="logout-text">退出登录</text>
      </button>
    </view>

    <!-- 底部占位 -->
    <view class="bottom-spacer"></view>

  </scroll-view>
</view>
