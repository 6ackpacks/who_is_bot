/* pages/feed/feed.wxss - Burgundy Theme Enhanced Design */

/* ===== 容器 - Burgundy Cream Background ===== */
.feed-container {
  width: 100vw;
  min-height: 100vh;
  background: var(--bg-cream);
  position: relative;
  overflow: hidden;
  padding-bottom: 120rpx;
}

/* 背景装饰 - 柔和的装饰效果 */
.feed-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image:
    radial-gradient(circle at 30% 20%, rgba(89, 28, 46, 0.03) 0%, transparent 50%),
    radial-gradient(circle at 70% 80%, rgba(230, 141, 159, 0.04) 0%, transparent 50%);
  pointer-events: none;
}

/* Removed .feed-scroll - no longer needed */

/* ===== 加载状态 ===== */
.loading-container {
  width: 100%;
  height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: transparent;
  animation: fadeIn 0.3s ease-out;
}

.loading-spinner {
  width: 80rpx;
  height: 80rpx;
  border: 6rpx solid var(--ui-gray);
  border-top-color: var(--primary-burgundy);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 30rpx;
  box-shadow: 0 0 20rpx rgba(89, 28, 46, 0.2);
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.loading-text {
  font-size: 28rpx;
  color: var(--text-dark);
  font-family: var(--font-body);
  animation: pulse 2s ease-in-out infinite;
}

/* ===== 错误状态 ===== */
.error-container {
  width: 100%;
  height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 0 60rpx;
  animation: fadeIn 0.3s ease-out;
}

.error-text {
  font-size: 28rpx;
  color: var(--text-dark);
  text-align: center;
  margin-bottom: 40rpx;
  line-height: 1.8;
  font-family: var(--font-body);
  animation: slideInUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

.retry-btn {
  padding: 24rpx 60rpx;
  background: var(--primary-burgundy);
  color: var(--bg-cream);
  border-radius: var(--radius-pill);
  font-size: 28rpx;
  font-weight: 600;
  border: none;
  font-family: var(--font-body);
  box-shadow: 0 8rpx 24rpx rgba(89, 28, 46, 0.2);
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  animation: slideInUp 0.5s cubic-bezier(0.16, 1, 0.3, 1);
}

.retry-btn::after {
  border: none;
}

.retry-btn:active {
  transform: scale(0.96);
  box-shadow: 0 4rpx 12rpx rgba(89, 28, 46, 0.2);
}

/* ===== 判定视图 - 单屏布局优化 ===== */
.judgment-view {
  padding: 40rpx 32rpx 227rpx; /* 底部预留 Banner 安全区域，按钮上移 2/3 高度 */
  height: 100vh;
  display: flex;
  flex-direction: column;
  overflow: hidden; /* 禁止滚动 */
  box-sizing: border-box;
  animation: fadeIn 0.4s ease-out;
  position: relative;
}

/* 背景装饰 Blob */
.judgment-view::before,
.judgment-view::after {
  content: '';
  position: absolute;
  border-radius: 40%;
  filter: blur(60rpx);
  z-index: 0;
  opacity: 0.15;
  animation: float 6s ease-in-out infinite;
  pointer-events: none;
}

.judgment-view::before {
  width: 300rpx;
  height: 300rpx;
  background: radial-gradient(circle at 30% 30%, #E68D9F, #D4AF37);
  top: -100rpx;
  right: -80rpx;
}

.judgment-view::after {
  width: 250rpx;
  height: 250rpx;
  background: radial-gradient(circle at 30% 30%, #D4AF37, #E68D9F);
  bottom: 100rpx;
  left: -60rpx;
  animation-delay: 3s;
}

@keyframes float {
  0%, 100% { transform: translateY(0px) rotate(0deg); }
  50% { transform: translateY(-20rpx) rotate(5deg); }
}

.page-title {
  font-size: 56rpx;
  font-weight: 700;
  color: var(--primary-burgundy);
  text-align: center;
  margin-bottom: 20rpx;
  font-family: var(--font-display);
  flex-shrink: 0; /* 不压缩标题 */
  animation: slideInDown 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
  letter-spacing: -1rpx;
  position: relative;
  z-index: 1;
  height: auto; /* 固定高度约 80rpx */
}

/* ===== 内容区域 - 弹性空间，自动压缩 ===== */
.content-wrapper {
  width: 100%;
  position: relative;
  flex: 1; /* 占据剩余空间 */
  display: flex;
  flex-direction: column;
  min-height: 0; /* 允许内容压缩 */
  overflow: hidden;
  animation: scaleIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.1s backwards;
  z-index: 1;
}

.quote-icon {
  font-size: 60rpx;
  color: rgba(89, 28, 46, 0.1);
  font-family: Georgia, serif;
  font-weight: bold;
  line-height: 1;
  margin-bottom: 16rpx;
  padding-left: 20rpx;
  flex-shrink: 0;
  animation: fadeIn 0.4s ease-out 0.2s backwards;
}

/* ===== 内容卡片 - Burgundy Theme，带卡片动画 ===== */
.content-card {
  background: var(--surface-white);
  backdrop-filter: blur(20rpx);
  border-radius: var(--radius-soft);
  padding: 40rpx;
  box-shadow: 0 20rpx 60rpx rgba(89, 28, 46, 0.15);
  border: 3rpx solid var(--ui-gray);
  position: relative;
  overflow-y: auto;
  flex: 1; /* 占据剩余空间 */
  min-height: 0; /* 允许压缩 */
  transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  animation: cardEnter 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s backwards;
  transform-origin: bottom center;
}

/* 结果视图中的内容卡片 - 移除高度限制和滚动 */
.result-view .content-card {
  overflow-y: visible;
  max-height: none;
  height: auto;
}

/* 判定页面的内容卡片 - 禁止内部滚动 */
.judgment-view .content-card {
  overflow-y: hidden;
}

/* 判定页面的文字内容 - 允许滚动 */
.judgment-view .content-text {
  overflow-y: auto;
  max-height: 100%;
}

@keyframes cardEnter {
  0% {
    opacity: 0;
    transform: scale(0.5) translateY(100rpx);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.content-card:active {
  transform: scale(0.98);
}

/* 图片卡片 - 判定页面专用 */
.judgment-view .content-card.image-card {
  padding: 0;
  background: transparent;
  backdrop-filter: none;
  box-shadow: none;
  overflow: visible;
  border: none;
  position: relative;
  flex: 1; /* 占据剩余空间 */
  min-height: 0; /* 允许压缩 */
  display: flex;
  flex-direction: column;
}

/* 背景卡片效果 */
.content-card.image-card::before {
  content: '';
  position: absolute;
  top: 20rpx;
  left: 0;
  right: 0;
  height: 100%;
  background: var(--ui-gray);
  border-radius: var(--radius-soft);
  transform: scale(0.95) translateY(20rpx);
  opacity: 0.5;
  z-index: -1;
  transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.content-image-wrapper {
  position: relative;
  border-radius: var(--radius-soft);
  overflow: hidden;
  box-shadow: 0 20rpx 60rpx rgba(89, 28, 46, 0.2);
  border: 4rpx solid var(--surface-white);
  width: 100%;
  flex: 1; /* 占据剩余空间 */
  min-height: 0; /* 允许压缩 */
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--ui-gray);
  transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* 判定页面的图片和视频 - 自适应压缩 */
.judgment-view .content-image {
  width: 100%;
  height: 100%; /* 填充父容器 */
  display: block;
  object-fit: contain; /* 保持比例，不裁剪 */
  animation: fadeIn 0.5s ease-out;
}

.judgment-view .content-video {
  width: 100%;
  height: 100%; /* 填充父容器 */
  display: block;
  object-fit: contain; /* 保持比例，不裁剪 */
  background: var(--text-dark);
  border-radius: var(--radius-soft);
}

/* 文字内容 */
.content-text {
  font-size: 32rpx;
  line-height: 1.8;
  color: var(--text-dark);
  font-family: var(--font-body);
  display: block;
  animation: fadeIn 0.5s ease-out 0.3s backwards;
}

/* ===== 来源信息 ===== */
.source-info {
  font-size: 24rpx;
  color: #666;
  text-align: center;
  margin-bottom: 20rpx;
  margin-top: 24rpx;
  font-family: var(--font-body);
  animation: fadeIn 0.4s ease-out 0.3s backwards;
}

/* ===== 判定按钮 - 固定高度，不压缩 ===== */
.action-buttons {
  display: flex;
  gap: 40rpx;
  width: 100%;
  padding: 0 10rpx;
  flex-shrink: 0; /* 不压缩按钮 */
  margin-top: 30rpx;
  justify-content: center;
  animation: slideInUp 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s backwards;
  position: relative;
  z-index: 1;
  height: 160rpx; /* 固定高度 */
}

/* 已判断状态的按钮容器 */
.action-buttons.judged {
  opacity: 1;
}

.btn-judge {
  width: 160rpx;
  height: 160rpx;
  border-radius: 50%;
  border: none;
  font-family: var(--font-body);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  position: relative;
  overflow: visible;
}

.btn-text {
  color: #000000;
  font-size: 32rpx;
  font-weight: 700;
  font-style: italic;
  font-family: var(--font-display);
}

.btn-judge::after {
  border: none;
}

.btn-judge:active {
  transform: scale(0.9);
}

/* 已判断的按钮样式（半透明） */
.btn-judge.judged {
  opacity: 0.4;
}

/* 用户选择标记（✓） */
.btn-judge.user-choice::after {
  content: '✓';
  position: absolute;
  top: -12rpx;
  right: -12rpx;
  width: 56rpx;
  height: 56rpx;
  background: var(--accent-rose);
  color: var(--surface-white);
  font-size: 32rpx;
  font-weight: 700;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 8rpx 20rpx rgba(230, 141, 159, 0.5);
  border: 4rpx solid var(--bg-cream);
  z-index: 10;
}

/* AI 按钮 - 灰色金属球体效果 */
.btn-ai {
  background: radial-gradient(circle at 30% 30%, #E0E0E0, #A0A0A0);
  box-shadow:
    inset 10rpx 10rpx 20rpx rgba(255, 255, 255, 0.8),
    inset -10rpx -10rpx 20rpx rgba(0, 0, 0, 0.2),
    0 20rpx 40rpx rgba(0, 0, 0, 0.1);
}

.btn-ai:active {
  transform: scale(0.9);
  box-shadow:
    inset 10rpx 10rpx 20rpx rgba(255, 255, 255, 0.8),
    inset -10rpx -10rpx 20rpx rgba(0, 0, 0, 0.2),
    0 10rpx 20rpx rgba(0, 0, 0, 0.1);
}

/* Human 按钮 - 浅黄色球体效果 */
.btn-human {
  background: radial-gradient(circle at 30% 30%, #FFF5D0, #E8D95F);
  box-shadow:
    inset 10rpx 10rpx 20rpx rgba(255, 255, 255, 0.8),
    inset -10rpx -10rpx 20rpx rgba(0, 0, 0, 0.1),
    0 20rpx 40rpx rgba(232, 217, 95, 0.3);
}

.btn-human:active {
  transform: scale(0.9);
  box-shadow:
    inset 10rpx 10rpx 20rpx rgba(255, 255, 255, 0.8),
    inset -10rpx -10rpx 20rpx rgba(0, 0, 0, 0.1),
    0 10rpx 20rpx rgba(232, 217, 95, 0.3);
}

/* 查看解析按钮容器 - 固定高度，不压缩 */
.view-analysis-container {
  width: 100%;
  display: flex;
  justify-content: center;
  margin-top: 20rpx;
  flex-shrink: 0; /* 不压缩 */
  height: 96rpx; /* 固定高度 */
  animation: slideInUp 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.4s backwards;
}

/* 查看解析按钮 */
.btn-view-analysis {
  width: 560rpx;
  height: 96rpx;
  background: var(--primary-burgundy);
  color: var(--bg-cream);
  border-radius: 48rpx;
  font-size: 32rpx;
  font-weight: 600;
  border: none;
  font-family: var(--font-body);
  box-shadow: 0 12rpx 32rpx rgba(89, 28, 46, 0.3);
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  display: flex;
  align-items: center;
  justify-content: center;
}

.btn-view-analysis::after {
  border: none;
}

.btn-view-analysis:active {
  transform: scale(0.97);
  box-shadow: 0 8rpx 24rpx rgba(89, 28, 46, 0.3);
}

/* ===== 结果视图 - 评论/结果页面 - FIXED SCROLL STRUCTURE ===== */
.result-view {
  width: 100%;
  min-height: 100vh;
  padding-bottom: 200rpx;
  animation: fadeIn 0.4s ease-out;
  display: flex;
  flex-direction: column;
  /* Single unified scroll - NO nested scroll containers */
}

/* Main result content wrapper - fits in viewport */
.result-main-content {
  flex: 0 0 auto;
  max-height: calc(100vh - 120rpx);
  display: flex;
  flex-direction: column;
}

/* 返回按钮 - 左上角固定定位 */
.back-button {
  position: fixed;
  top: 40rpx;
  left: 32rpx;
  height: 72rpx;
  padding: 0 24rpx;
  background: rgba(255, 255, 255, 0.95);
  border-radius: 36rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8rpx;
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);
  z-index: 1000;
  transition: all 0.3s ease;
}

.back-button:active {
  transform: scale(0.95);
  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);
}

.back-icon {
  font-size: 32rpx;
  color: #333;
  font-weight: bold;
  line-height: 1;
}

.back-text {
  font-size: 28rpx;
  color: #333;
  font-weight: 600;
  line-height: 1;
}

/* 继续挑战按钮 - 右上角固定定位 */
.next-button {
  position: fixed;
  top: 40rpx;
  right: 32rpx;
  height: 72rpx;
  padding: 0 24rpx;
  background: rgba(255, 255, 255, 0.95);
  border-radius: 36rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8rpx;
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);
  z-index: 1000;
  transition: all 0.3s ease;
}

.next-button:active {
  transform: scale(0.95);
  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);
}

.next-text {
  font-size: 28rpx;
  color: #333;
  font-weight: 600;
  line-height: 1;
}

.next-icon {
  font-size: 32rpx;
  color: #333;
  font-weight: bold;
  line-height: 1;
}

/* 内容卡片 - REDUCED BOTTOM MARGIN */
.content-card {
  margin: 0 32rpx 32rpx 32rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
  animation: slideInUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) 0.1s backwards;
}

/* 判定视觉容器 - 固定1:1比例，参考learn-say.md */
.judgment-visual {
  width: 560rpx;
  height: 560rpx;
  position: relative;
  margin: 0 auto 32rpx auto;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* 内容容器 - 完美圆形，80%大小 */
.content-image-container {
  width: 80%;
  height: 80%;
  aspect-ratio: 1 / 1;
  background-color: #FFF5F2;
  border-radius: 50%;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  box-shadow: 0 8rpx 32rpx rgba(89, 28, 46, 0.12);
}

.content-media {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.content-text-display {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 48rpx;
  box-sizing: border-box;
}

.content-text-display text {
  font-size: 28rpx;
  line-height: 1.6;
  color: var(--text-dark);
  text-align: center;
  font-family: var(--font-body);
  word-wrap: break-word;
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 8;
  -webkit-box-orient: vertical;
}

/* 旋转扫描边框 - 圆形 */
.scan-overlay {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 88%;
  height: 88%;
  border: 3rpx dashed var(--accent-rose);
  border-radius: 50%;
  opacity: 0.5;
  animation: spinCircle 20s linear infinite;
  pointer-events: none;
}

@keyframes spinCircle {
  from {
    transform: translate(-50%, -50%) rotate(0deg);
  }
  to {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}

/* 来源标签 - 定位在圆形下方 */
.tag-pill {
  position: absolute;
  bottom: -16rpx;
  left: 50%;
  transform: translateX(-50%);
  background: var(--surface-white);
  padding: 10rpx 28rpx;
  border-radius: 40rpx;
  font-size: 22rpx;
  font-weight: 700;
  color: var(--text-dark);
  box-shadow: 0 8rpx 20rpx rgba(89, 28, 46, 0.15);
  display: flex;
  align-items: center;
  gap: 8rpx;
  font-family: var(--font-body);
  white-space: nowrap;
  z-index: 10;
}

.tag-dot {
  color: var(--accent-rose);
  font-size: 20rpx;
}

/* 结果头部 - STATUS BADGE ONLY (NOT A BUTTON) - REDUCED SIZES */
.result-header {
  text-align: center;
  margin-bottom: 32rpx;
  width: 100%;
  padding: 0 32rpx;
}

.status-badge {
  display: inline-block;
  background: var(--primary-burgundy);
  color: var(--surface-white);
  padding: 16rpx 32rpx;
  border-radius: 32rpx;
  font-size: 40rpx;
  font-weight: 700;
  margin-bottom: 16rpx;
  font-family: var(--font-body);
  letter-spacing: 2rpx;
  /* NOT a button - just a display badge */
}

.result-main-title {
  font-size: 40rpx;
  font-weight: 700;
  color: var(--text-dark);
  margin-bottom: 12rpx;
  font-family: var(--font-display);
}

.result-subtitle {
  font-size: 24rpx;
  color: var(--text-secondary);
  font-family: var(--font-body);
}

/* 统计容器 - REDUCED PADDING AND SPACING */
.stats-container {
  width: 100%;
  background: var(--surface-white);
  border-radius: 48rpx;
  padding: 32rpx;
  margin: 0 32rpx 24rpx 32rpx;
  box-shadow: 0 4rpx 16rpx rgba(89, 28, 46, 0.08);
}

.stat-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 16rpx;
  font-size: 28rpx;
  font-weight: 600;
  font-family: var(--font-body);
}

.stat-percentage {
  color: var(--accent-rose);
  font-weight: 700;
}

.progress-track {
  height: 24rpx;
  background: var(--bg-cream);
  border-radius: 12rpx;
  overflow: hidden;
  position: relative;
  margin-bottom: 16rpx;
}

.progress-fill {
  height: 100%;
  background: var(--accent-rose);
  border-radius: 12rpx;
  transition: width 0.8s cubic-bezier(0.16, 1, 0.3, 1);
}

.stat-meta {
  display: flex;
  justify-content: space-between;
  font-size: 24rpx;
  color: var(--text-secondary);
  font-family: var(--font-body);
}

/* 解析卡片 */
.analysis-card {
  background: #FFF5F2;
  border-radius: 48rpx;
  padding: 40rpx;
  margin: 0 32rpx 64rpx 32rpx;
  animation: slideInUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) 0.2s backwards;
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

.analysis-card:active {
  transform: scale(0.99);
}

.analysis-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24rpx;
  color: var(--accent-rose);
  font-weight: 700;
  font-size: 28rpx;
  font-family: var(--font-body);
}

.analysis-title {
  flex: 1;
}

.chevron {
  font-size: 56rpx;
  font-weight: 700;
  transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  transform: rotate(90deg);
  line-height: 1;
  color: var(--primary-burgundy);
  background: rgba(89, 28, 46, 0.1);
  width: 64rpx;
  height: 64rpx;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.chevron.expanded {
  transform: rotate(-90deg);
}

.analysis-content {
  font-size: 28rpx;
  line-height: 1.6;
  color: #5A4A48;
  font-family: var(--font-body);
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

.analysis-content.show {
  max-height: 1000rpx;
  opacity: 1;
}

/* 评论区域 - NO NESTED SCROLL */
.comments-section {
  padding: 0 32rpx;
  margin-bottom: 40rpx;
  animation: slideInUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) 0.3s backwards;
  /* NO max-height, NO overflow-y: scroll - comments flow naturally */
}

.section-title-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 32rpx;
}

.section-title {
  font-size: 36rpx;
  font-weight: 700;
  color: var(--text-dark);
  font-family: var(--font-display);
}

/* 内联继续挑战按钮 */
.btn-next-inline {
  display: flex;
  align-items: center;
  gap: 8rpx;
  background: var(--text-dark);
  color: white;
  padding: 16rpx 32rpx;
  border-radius: 999rpx;
  font-size: 28rpx;
  font-weight: 600;
  font-family: var(--font-body);
  box-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.15);
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

.btn-next-inline:active {
  transform: scale(0.95);
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.15);
}

.btn-next-text {
  font-size: 28rpx;
  line-height: 1;
}

.btn-next-arrow {
  font-size: 32rpx;
  line-height: 1;
  font-weight: 700;
}

/* 评论输入框 - 内联样式 */
.comment-input-container {
  display: flex;
  align-items: center;
  gap: 16rpx;
  margin-bottom: 40rpx;
  background: var(--bg-cream);
  border-radius: 48rpx;
  padding: 0 8rpx 0 32rpx;
  height: 88rpx;
  box-shadow: 0 4rpx 16rpx rgba(89, 28, 46, 0.08);
  border: 2rpx solid var(--ui-gray);
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

.comment-input-container:focus-within {
  background: var(--surface-white);
  box-shadow: 0 8rpx 24rpx rgba(89, 28, 46, 0.15);
  border-color: var(--accent-rose);
}

.comment-input-field {
  flex: 1;
  font-size: 28rpx;
  color: var(--text-dark);
  font-family: var(--font-body);
  height: 88rpx;
  line-height: 88rpx;
  background: transparent;
  border: none;
}

.comment-send-btn {
  width: 72rpx;
  height: 72rpx;
  border-radius: 50%;
  background: var(--accent-rose);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  box-shadow: 0 4rpx 16rpx rgba(230, 141, 159, 0.3);
  flex-shrink: 0;
}

.comment-send-btn:active {
  transform: scale(0.92);
}

.send-icon {
  font-size: 32rpx;
  line-height: 1;
}

/* Sort toggle removed as per requirements */

/* 评论列表 - FLOWS NATURALLY WITHOUT SCROLL */
.comments-list {
  display: flex;
  flex-direction: column;
  gap: 40rpx;
  /* NO max-height, NO overflow - all comments visible */
}

.empty-comments {
  padding: 120rpx 0;
  text-align: center;
  animation: fadeIn 0.5s ease-out;
}

.empty-text {
  font-size: 28rpx;
  color: #999;
  font-family: var(--font-body);
}

/* 评论项 */
.comment-item {
  display: flex;
  gap: 24rpx;
  animation: slideInLeft 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

.avatar {
  width: 80rpx;
  height: 80rpx;
  border-radius: 24rpx;
  flex-shrink: 0;
  background: var(--ui-gray);
  overflow: hidden;
}

.comment-body {
  flex: 1;
  min-width: 0;
}

.comment-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8rpx;
}

.username-row {
  display: flex;
  align-items: center;
  gap: 12rpx;
}

.username {
  font-size: 28rpx;
  font-weight: 600;
  color: var(--text-dark);
  font-family: var(--font-body);
}

.pin-badge {
  background: var(--bg-cream);
  color: var(--text-secondary);
  font-size: 20rpx;
  padding: 4rpx 12rpx;
  border-radius: 8rpx;
  text-transform: uppercase;
  font-family: var(--font-body);
}

.comment-time {
  font-size: 24rpx;
  color: var(--text-secondary);
  font-family: var(--font-body);
}

.comment-text {
  font-size: 28rpx;
  line-height: 1.5;
  color: #444;
  margin-bottom: 16rpx;
  word-wrap: break-word;
  font-family: var(--font-body);
}

.comment-actions {
  display: flex;
  gap: 32rpx;
  font-size: 24rpx;
  color: var(--text-secondary);
  font-family: var(--font-body);
}

.action-btn {
  display: flex;
  align-items: center;
  gap: 8rpx;
  transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
}

.action-btn:active {
  transform: scale(0.95);
}

.like-icon {
  font-size: 28rpx;
}

.action-count {
  font-size: 24rpx;
}

/* Removed .bottom-bar - no longer needed (input is now inline) */
/* Removed .fab-next - button is now inline with section title */

/* ===== 统计条 - Burgundy Theme ===== */
.stats-bar {
  display: flex;
  height: 60rpx;
  border-radius: 30rpx;
  overflow: hidden;
  margin-bottom: 40rpx;
  box-shadow: 0 4rpx 16rpx rgba(89, 28, 46, 0.15);
  animation: scaleIn 0.5s cubic-bezier(0.16, 1, 0.3, 1) 0.2s backwards;
}

.stat-item {
  display: flex;
  align-items: center;
  justify-content: center;
  transition: width 0.6s cubic-bezier(0.16, 1, 0.3, 1);
}

.stat-ai {
  background: var(--accent-rose);
}

.stat-human {
  background: var(--accent-gold);
}

.stat-text {
  font-size: 28rpx;
  font-weight: 700;
  color: var(--surface-white);
  font-family: var(--font-body);
  text-shadow: 0 2rpx 4rpx rgba(0, 0, 0, 0.2);
}

/* ===== 解析说明 ===== */
.explanation-box {
  background: var(--accent-rose-light);
  border-radius: 20rpx;
  padding: 32rpx;
  margin-bottom: 40rpx;
  box-shadow: 0 4rpx 16rpx rgba(89, 28, 46, 0.08);
  border: 2rpx solid rgba(230, 141, 159, 0.2);
  animation: slideInUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) 0.3s backwards;
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

.explanation-box:active {
  transform: scale(0.99);
}

.explanation-label {
  font-size: 22rpx;
  color: var(--accent-rose);
  display: block;
  margin-bottom: 16rpx;
  font-family: var(--font-body);
  text-transform: uppercase;
  letter-spacing: 1rpx;
  font-weight: 600;
  transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

.explanation-box.collapsed .explanation-label {
  transform: rotate(-90deg);
}

.explanation-text {
  font-size: 28rpx;
  line-height: 1.8;
  color: var(--text-dark);
  font-family: var(--font-body);
}

/* ===== 评论区域 ===== */
.comments-section {
  margin-bottom: 40rpx;
  animation: slideInUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) 0.4s backwards;
}

.comments-header {
  margin-bottom: 24rpx;
}

.comments-title {
  font-size: 28rpx;
  font-weight: 600;
  color: var(--primary-burgundy);
  font-family: var(--font-display);
  display: flex;
  align-items: center;
  gap: 8rpx;
}

/* 评论输入框 */
.comment-input-wrapper {
  display: flex;
  align-items: center;
  gap: 16rpx;
  margin-bottom: 24rpx;
  background: var(--bg-cream);
  border-radius: 48rpx;
  padding: 8rpx 8rpx 8rpx 24rpx;
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  box-shadow: 0 2rpx 8rpx rgba(89, 28, 46, 0.08);
  border: 2rpx solid var(--ui-gray);
}

.comment-input-wrapper:focus-within {
  background: var(--surface-white);
  box-shadow: 0 4rpx 16rpx rgba(89, 28, 46, 0.15);
  border-color: var(--accent-rose);
}

.comment-input {
  flex: 1;
  font-size: 28rpx;
  color: var(--text-dark);
  font-family: var(--font-body);
  min-height: 64rpx;
  line-height: 64rpx;
}

.comment-submit-btn {
  padding: 16rpx 32rpx;
  background: var(--primary-burgundy);
  color: var(--bg-cream);
  border-radius: 40rpx;
  font-size: 28rpx;
  font-weight: 600;
  border: none;
  font-family: var(--font-body);
  line-height: 1;
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  box-shadow: 0 2rpx 8rpx rgba(89, 28, 46, 0.2);
}

.comment-submit-btn::after {
  border: none;
}

.comment-submit-btn:active {
  transform: scale(0.95);
  box-shadow: 0 1rpx 4rpx rgba(89, 28, 46, 0.2);
}

/* 评论列表 */
.comments-list {
  display: flex;
  flex-direction: column;
  gap: 20rpx;
}

.empty-comments {
  padding: 60rpx 0;
  text-align: center;
  animation: fadeIn 0.5s ease-out;
}

.empty-text {
  font-size: 28rpx;
  color: #999;
  font-family: var(--font-body);
}

/* 评论项 */
.comment-item {
  display: flex;
  gap: 20rpx;
  padding: 24rpx;
  background: var(--surface-white);
  border-radius: 16rpx;
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  animation: slideInLeft 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  box-shadow: 0 2rpx 8rpx rgba(89, 28, 46, 0.08);
  border: 2rpx solid var(--ui-gray);
}

.comment-item:active {
  background: var(--accent-rose-light);
  transform: scale(0.99);
}

.comment-avatar {
  width: 72rpx;
  height: 72rpx;
  border-radius: 50%;
  flex-shrink: 0;
  background: var(--ui-gray);
  transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  border: 2px solid var(--ui-gray);
}

.comment-item:active .comment-avatar {
  transform: scale(0.95);
}

.comment-main {
  flex: 1;
  min-width: 0;
}

.comment-header {
  display: flex;
  align-items: center;
  gap: 12rpx;
  margin-bottom: 12rpx;
}

.comment-nickname {
  font-size: 28rpx;
  font-weight: 600;
  color: var(--text-dark);
  font-family: var(--font-body);
}

.comment-level {
  font-size: 22rpx;
  color: var(--surface-white);
  background: var(--primary-burgundy);
  padding: 4rpx 12rpx;
  border-radius: 12rpx;
  font-family: var(--font-body);
  font-weight: 600;
}

.comment-time {
  font-size: 24rpx;
  color: #999;
  margin-left: auto;
  font-family: var(--font-body);
}

.comment-content {
  font-size: 28rpx;
  line-height: 1.7;
  color: var(--text-dark);
  margin-bottom: 16rpx;
  word-wrap: break-word;
  font-family: var(--font-body);
}

/* 评论操作按钮 */
.comment-actions {
  display: flex;
  gap: 32rpx;
  align-items: center;
}

.action-btn {
  display: flex;
  align-items: center;
  gap: 8rpx;
  padding: 8rpx 0;
  transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
}

.action-text {
  font-size: 24rpx;
  color: #999;
  font-family: var(--font-body);
  transition: color 0.2s ease;
}

.action-btn:active {
  transform: scale(0.95);
}

.action-btn:active .action-text {
  color: var(--accent-rose);
}

/* 回复列表 */
.replies-list {
  margin-top: 16rpx;
  padding-left: 24rpx;
  border-left: 2px solid var(--ui-gray);
  display: flex;
  flex-direction: column;
  gap: 12rpx;
}

.reply-item {
  display: flex;
  align-items: flex-start;
  gap: 8rpx;
  font-size: 26rpx;
  line-height: 1.6;
  font-family: var(--font-body);
  animation: fadeIn 0.3s ease-out;
}

.reply-author {
  color: var(--accent-rose);
  font-weight: 600;
  flex-shrink: 0;
}

.reply-content {
  color: var(--text-dark);
  flex: 1;
  word-wrap: break-word;
}

.reply-actions {
  display: flex;
  align-items: center;
  margin-left: auto;
  flex-shrink: 0;
}

.reply-likes {
  font-size: 22rpx;
  color: #999;
}

/* ===== 底部按钮 ===== */
.bottom-actions {
  display: flex;
  gap: 20rpx;
  padding-top: 20rpx;
  animation: slideInUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) 0.5s backwards;
}

.btn-secondary {
  flex: 1;
  height: 96rpx;
  background: var(--surface-white);
  border: 2rpx solid var(--primary-burgundy);
  border-radius: 48rpx;
  font-size: 32rpx;
  font-weight: 600;
  color: var(--primary-burgundy);
  font-family: var(--font-body);
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  box-shadow: 0 2rpx 8rpx rgba(89, 28, 46, 0.1);
}

.btn-secondary::after {
  border: none;
}

.btn-secondary:active {
  background: var(--accent-rose-light);
  transform: scale(0.97);
  box-shadow: 0 1rpx 4rpx rgba(89, 28, 46, 0.1);
}

.btn-primary {
  flex: 1;
  height: 96rpx;
  background: var(--primary-burgundy);
  border-radius: 48rpx;
  font-size: 32rpx;
  font-weight: 600;
  color: var(--bg-cream);
  border: none;
  font-family: var(--font-body);
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  box-shadow: 0 4rpx 12rpx rgba(89, 28, 46, 0.25);
}

.btn-primary::after {
  border: none;
}

.btn-primary:active {
  transform: scale(0.97);
  box-shadow: 0 2rpx 8rpx rgba(89, 28, 46, 0.25);
}

/* ===== 动画 ===== */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideInUp {
  from { opacity: 0; transform: translateY(30rpx); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideInDown {
  from { opacity: 0; transform: translateY(-30rpx); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideInLeft {
  from { opacity: 0; transform: translateX(-20rpx); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

/* ===== 卡片滑动动画 ===== */
.card-swipe-left {
  animation: swipeLeft 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.card-swipe-right {
  animation: swipeRight 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes swipeLeft {
  0% {
    transform: translateX(0) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateX(-50rpx) rotate(-10deg);
    opacity: 0.8;
  }
}

@keyframes swipeRight {
  0% {
    transform: translateX(0) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateX(50rpx) rotate(10deg);
    opacity: 0.8;
  }
}

/* 卡片重置动画 */
.card-reset {
  animation: cardReset 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes cardReset {
  0% {
    transform: scale(0.5);
    opacity: 0;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}
